<!DOCTYPE html>
<html>
<head>
  <title>My profile</title>
</head>
<body>
  <h1>My profile</h1>

  <!-- STEP 6: Profile Picture -->
  {% if request.user.profile_image %}
    <img src="{{ request.user.profile_image.url }}"
         alt="profile picture"
         class="rounded-circle"
         style="width:120px; height:120px; object-fit:cover; margin-bottom:20px;">
  {% else %}
    <!-- Optional: Default avatar image -->
    <img src="/static/default_profile.png"
         alt="default profile"
         class="rounded-circle"
         style="width:120px; height:120px; object-fit:cover; margin-bottom:20px;">
  {% endif %}

  <p><strong>Username:</strong> {{ request.user.username }}</p>
  <p><strong>Email:</strong> {{ request.user.email }}</p>
  <p><strong>First name:</strong> {{ request.user.first_name }}</p>
  <p><strong>Last name:</strong> {{ request.user.last_name }}</p>
  <p><strong>Favorite Genre:</strong> {{ request.user.favorite_genre|title }}</p>
  <p><strong>Favorite Authors:</strong> {{ request.user.favorite_authors|join:", " }}</p>

  <p><strong>Bio:</strong><br>
    {{ request.user.user_bio|linebreaks }}
  </p>

  <p>
    <a href="{% url 'accounts:profile_edit' %}">Edit profile</a> |
    <a href="{% url 'accounts:password_change' %}">Change password</a> |
    <!-- Authentication display -->
    <div style="margin-bottom: 10px;">
      {% if user.is_authenticated %}
        Hello, {{ user.username }} |
        <a href="{% url 'accounts:profile' %}">My profile</a> |
        <form action="{% url 'accounts:logout' %}" method="post" style="display:inline;">
          {% csrf_token %}
          <button type="submit">Logout</button>
        </form>
      {% else %}
        <a href="{% url 'accounts:login' %}">Login</a> |
        <a href="{% url 'accounts:signup' %}">Sign up</a>
      {% endif %}
    </div>
  </p>

  <p><a href="{% url 'home' %}">Back to home</a></p>
</body>
</html>